<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Elasticsearch &middot; Mesos Framework
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/elasticsearch/public/css/poole.css">
  <link rel="stylesheet" href="/elasticsearch/public/css/syntax.css">
  <link rel="stylesheet" href="/elasticsearch/public/css/lanyon.css">
  <link rel="stylesheet" href="/elasticsearch/public/css/custom.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/elasticsearch/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/elasticsearch/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="atom.xml">
</head>


  <body class="theme-base-0b">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>Elasticsearch on Mesos</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="">Home</a>
    <a class="sidebar-nav-item" href="https://github.com/mesos/elasticsearch/archive/master.zip">Download</a>
    <a class="sidebar-nav-item" href="https://github.com/mesos/elasticsearch">GitHub project</a>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2015 All rights reserved
    </p>
  </div>
</div>

    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="" title="Home">Elasticsearch</a>
            <small>Mesos Framework</small>
          </h3>
        </div>
      </div>

      <div class="container content">

        <h1>Elasticsearch Mesos Framework</h1>

        <ul>
        <li><a href="#roadmap">Roadmap</a>
        <ul>
        <li><a href="#features">Features</a></li>
        <li><a href="#depends-on-upcoming-mesos-features">Depends on upcoming Mesos features</a></li>
        <li><a href="#developer-tools">Developer Tools</a></li>
        <li><a href="#user-tools">User tools</a></li>
        <li><a href="#certification">Certification</a></li>
        </ul>
        </li>
        <li><a href="#getting-started">Getting Started</a></li>
        <li><a href="#users-guide">Users Guide</a>

        <ul>
        <li><a href="#how-to-install-on-marathon">How to install on Marathon</a></li>
        <li><a href="#user-interface">User Interface</a></li>
        </ul>
        </li>
        <li><a href="#developers-guide">Developers Guide</a>

        <ul>
        <li><a href="#quickstart">Quickstart</a></li>
        <li><a href="#how-to-run-on-linux">How to run on Linux</a>

        <ul>
        <li><a href="#requirements">Requirements</a></li>
        </ul>
        </li>
        <li><a href="#how-to-run-on-mac">How to run on Mac</a>

        <ul>
        <li><a href="#requirements-1">Requirements</a></li>
        </ul>
        </li>
        <li><a href="#system-test">System test</a>

        <ul>
        <li><a href="#how-to-run-system-tests-on-linux">How to run system tests on Linux</a>

        <ul>
        <li><a href="#requirements-2">Requirements</a></li>
        </ul>
        </li>
        <li><a href="#how-to-run-on-mac-1">How to run on Mac</a>

        <ul>
        <li><a href="#requirements-3">Requirements</a></li>
        </ul>
        </li>
        </ul>
        </li>
        </ul>
        </li>
        <li><a href="#sponsors">Sponsors</a></li>
        <li><a href="#license">License</a></li>
        </ul>

        <ul id="diagrams">
            <li><img src="/elasticsearch/public/img/ES_Mesos_Step1.png" alt=""/></li>
            <li><img src="/elasticsearch/public/img/ES_Mesos_Step2.png" alt=""/></li>
            <li><img src="/elasticsearch/public/img/ES_Mesos_Step3.png" alt=""/></li>
            <li><img src="/elasticsearch/public/img/ES_Mesos_Step4.png" alt=""/></li>
            <li><img src="/elasticsearch/public/img/ES_Mesos_Step5.png" alt=""/></li>
            <li><img src="/elasticsearch/public/img/ES_Mesos_Step6.png" alt=""/></li>
        </ul>

        <p class="cc"><img src="/elasticsearch/public/img/creative-commons-cc-by-purple.png">This work is licensed under CC BY | Authors: <a href="http://remembertoplay.co">remember to play</a> in collaboration with <a href="http://www.container-solutions.com">Container Solutions</a>.</p>

        <h2 id="roadmap">Roadmap</h2>

        <h3 id="features">Features</h3>

        <ul class="ballot">
        <li><span class="ballot_box_with_check"></span> Deployment</li>
        <li><span class="ballot_box_with_check"></span> Durable cluster topology (via ZooKeeper)</li>
        <li><span class="ballot_box_with_check"></span> Web UI on scheduler port 8080</li>
        <li><span class="ballot_box"></span> Support deploying multiple Elasticsearch clusters to single Mesos cluster</li>
        <li><span class="ballot_box"></span> Fault tolerance</li>
        <li><span class="ballot_box"></span> High availability (master, indexer, replica)</li>
        <li><span class="ballot_box"></span> Upgrading configuration</li>
        <li><span class="ballot_box"></span> Scale cluster horizontally</li>
        <li><span class="ballot_box"></span> Scale cluster vertically</li>
        <li><span class="ballot_box"></span> Upgrade</li>
        <li><span class="ballot_box"></span> Rollback</li>
        <li><span class="ballot_box"></span> Snapshot and restore</li>
        </ul>


        <h3 id="depends-on-upcoming-mesos-features">Depends on upcoming Mesos features</h3>

        <ul class="ballot">
        <li><span class="ballot_box"></span> Faster task recovery with Mesos dynamic reservations (https://issues.apache.org/jira/browse/MESOS-1554)</li>
        <li><span class="ballot_box"></span> Persistent storage</li>
        </ul>


        <h3 id="developers-tools">Developer Tools</h3>

        <ul class="ballot">
        <li><span class="ballot_box_with_check"></span> Local environment (Docker-machine)</li>
        <li><span class="ballot_box_with_check"></span> Rapid code + test (Mini Mesos)</li>
        <li><span class="ballot_box_with_check"></span> Build automation (Gradle)</li>
        </ul>


        <h3 id="user-tools">User tools</h3>

        <ul class="ballot">
        <li><span class="ballot_box"></span> One click DCOS install</li>
        <li><span class="ballot_box"></span> One JSON post to marathon install</li>
        </ul>


        <h3 id="certification">Certification</h3>

        <ul class="ballot">
        <li><span class="ballot_box"></span> DCOS Certified</li>
        </ul>


        <h2 id="getting-started">Getting Started</h2>

        <p>We recommend that users install via marathon or via the DCOS command line (coming soon!).</p>

        <p>This framework requires:
        * A running <a href="http://mesos.apache.org">Mesos</a> cluster
        * The use of <a href="https://github.com/mesosphere/marathon">Marathon</a> is strongly recommended to provide resiliency against scheduler failover.</p>

        <h2 id="users-guide">Users Guide</h2>

        <h3 id="how-to-install-on-marathon">How to install on Marathon</h3>

        <p>Create a Marathon file like the one below and fill in the IP addresses and other configuration.</p>

<pre><code>{
  "id": "elasticsearch-mesos-scheduler",
  "container": {
    "docker": {
      "image": "mesos/elasticsearch-scheduler",
      "network": "HOST"
    }
  },
  "args": ["-n", "3", "-zk", "zk://ZOOKEEPER_IP_ADDRESS:2181/mesos", "-ram", "2048"],
  "cpus": 0.2,
  "mem": 512.0,
  "instances": 1
}</code></pre>

        <p>Then post to marathon to instantiate the scheduler:
        <code>curl -k -XPOST -d @marathon.json -H "Content-Type: application/json" http://MARATHON_IP_ADDRESS:8080/v2/apps</code></p>

        <h3 id="user-interface">User Interface</h3>

        <p>The web based user interface is available on port 8080 of the scheduler by default. It displays real time information about the tasks running in the cluster and a basic configuration overview of the cluster.</p>

        <p>The user interface uses REST API of the Elasticsearch Mesos Framework. You can find the API documentation here: <a href="http://docs.elasticsearchmesosui.apiary.io/">docs.elasticsearchmesosui.apiary.io</a>.</p>

        <h2 id="developers-guide">Developers Guide</h2>

        <p>For developers, we have provided a range of tools for testing and running the project. Check out the <a href="https://github.com/containersolutions/mini-mesos">mini-mesos</a> project for an in-memory Mesos cluster for integration testing.</p>

        <h3 id="quickstart">Quickstart</h3>

        <p>You can run Mesos-Elasticsearch using <a href="https://github.com/containersolutions/mini-mesos">Mini Mesos</a>, a containerized Mesos cluster for testing frameworks.</p>

        <h3 id="how-to-run-on-linux">How to run on Linux</h3>

        <h4 id="requirements">Requirements</h4>

        <ul>
        <li>Docker</li>
        </ul>


        <pre><code>$ ./gradlew build buildDockerImage system-test:main</code></pre>

        <h3 id="how-to-run-on-mac">How to run on Mac</h3>

        <h4 id="requirements-1">Requirements</h4>

        <ul>
        <li>Docker Machine</li>
        </ul>


        <pre><code>$ docker-machine create -d virtualbox --virtualbox-memory 4096 --virtualbox-cpu-count 2 mesos-es
$ eval $(docker-machine env mesos-es)
$ ./gradlew build docker system-test:main</code></pre>

        <h3 id="system-test">System test</h3>

        <p>The project contains a system-test module which tests if the framework interacts correctly with Mesos, using <a href="https://github.com/containersolutions/mini-mesos">Mini Mesos</a>. We currently test Zookeeper discovery and the Scheduler's API by calling endpoints and verifying the results. As the framework grows we will add more system tests.</p>

        <h4 id="how-to-run-system-tests-on-linux">How to run system tests on Linux</h4>

        <h5 id="requirements-2">Requirements</h5>

        <ul>
        <li>Docker</li>
        </ul>


        <pre><code>$ ./gradlew build buildDockerImage system-test:systemTest</code></pre>

        <h4 id="how-to-run-on-mac-1">How to run on Mac</h4>

        <h5 id="requirements-3">Requirements</h5>

        <ul>
        <li>Docker Machine</li>
        </ul>


        <pre><code>$ docker-machine create -d virtualbox --virtualbox-memory 4096 --virtualbox-cpu-count 2 mesos-es
$ eval $(docker-machine env mesos-es)
$ ./gradlew build docker system-test:systemTest</code></pre>

        <h2 id="sponsors">Sponsors</h2>

        <p>This project is sponsored by Cisco Cloud Services</p>

        <h2 id="licence">License</h2>

        <p>Apache License 2.0</p>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
    <script type="text/javascript" src="/elasticsearch/public/js/jquery-2.1.3.min.js"></script>
    <script type="text/javascript" src="/elasticsearch/public/js/jquery.bxslider.min.js"></script>
      <script>
      $("#diagrams").bxSlider({
              mode: "fade",
              pager: false,
              auto: true,
              pause: 2000, // 2 seconds
              nextText: ">",
              prevText: "<",
              easing: "cubic-bezier(.7,.0,.3,1)"
        // More options to be found on http://bxslider.com/options
          });
    </script>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-64279609-1', 'auto');
      ga('send', 'pageview');

    </script>
  </body>
</html>
